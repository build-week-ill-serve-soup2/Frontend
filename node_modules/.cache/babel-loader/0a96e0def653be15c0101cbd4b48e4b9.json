{"ast":null,"code":"import axios from 'axios';\nimport axiosWithAuth from '../utilities/axiosWithAuth'; //Login actions\n\nexport const LOGIN_START = 'LOGIN_START';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\nexport const login = credentials => dispatch => {\n  dispatch({\n    type: LOGIN_START\n  });\n  return axios.post('https://alfonsog-kitchen.herokuapp.com/oauth/token', \"grant_type=password&username=\".concat(credentials.username, \"&password=\").concat(credentials.password), {\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'Authorization': 'Basic bGFtYmRhLWNsaWVudDpsYW1iZGEtc2VjcmV0'\n    }\n  }).then(response => {\n    console.log('login success: ', response);\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: credentials.username\n    });\n    localStorage.setItem('token', response.data.access_token);\n    localStorage.setItem('username', credentials.username);\n  }).catch(error => {\n    console.log('login error: ', error);\n    dispatch({\n      type: LOGIN_FAILURE,\n      payload: 'error logging in'\n    });\n  });\n}; //Logout action\n\nexport const LOGOUT = 'LOGOUT';\nexport const logout = () => {\n  return {\n    type: LOGOUT\n  };\n}; //Register actions\n\nexport const REGISTER_START = 'REGISTER_START';\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const REGISTER_FAILURE = 'REGISTER_FAILURE';\nexport const register = (history, credentials) => dispatch => {\n  dispatch({\n    type: REGISTER_START\n  });\n  axios.post('https://alfonsog-kitchen.herokuapp.com/createnewuser', credentials).then(response => {\n    console.log('registering success: ', response);\n    dispatch({\n      type: REGISTER_SUCCESS\n    });\n    return axios.post('https://alfonsog-kitchen.herokuapp.com/oauth/token', \"grant_type=password&username=\".concat(credentials.username, \"&password=\").concat(credentials.password), {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Authorization': 'Basic bGFtYmRhLWNsaWVudDpsYW1iZGEtc2VjcmV0'\n      }\n    }).then(response => {\n      console.log('login success: ', response);\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: credentials.username\n      });\n      localStorage.setItem('token', response.data.access_token);\n      localStorage.setItem('username', credentials.username);\n      history.push('/itemList');\n    }).catch(error => {\n      console.log('login error: ', error);\n      dispatch({\n        type: LOGIN_FAILURE,\n        payload: 'error logging in'\n      });\n    });\n  }).catch(error => {\n    console.log('registering error: ', error);\n    dispatch({\n      type: REGISTER_FAILURE,\n      payload: 'error registering user'\n    });\n  });\n}; //Fetch data actions\n\nexport const FETCH_ITEMS_START = 'FETCH_ITEMS_START';\nexport const FETCH_ITEMS_SUCCESS = 'FETCH_ITEMS_SUCCESS';\nexport const FETCH_ITEMS_FAILURE = 'FETCH_ITEMS_FAILURE';\nexport const fetchItems = username => dispatch => {\n  dispatch({\n    type: FETCH_ITEMS_START\n  });\n  axiosWithAuth().get(\"https://alfonsog-kitchen.herokuapp.com/users/getuser/\".concat(username)).then(response => {\n    console.log('fetching data success: ', response);\n    const userid = response.data.userid;\n    localStorage.setItem('userid', userid);\n    return axiosWithAuth().get(\"https://alfonsog-kitchen.herokuapp.com/items/\".concat(userid)).then(response => {\n      dispatch({\n        type: FETCH_ITEMS_SUCCESS,\n        payload: response.data\n      });\n    }).catch(error => {\n      console.log('fetching data error inner: ', error);\n      dispatch({\n        type: FETCH_ITEMS_FAILURE,\n        payload: 'error fetching items'\n      });\n    });\n  }).catch(error => {\n    console.log('fetching data error outer: ', error);\n    dispatch({\n      type: FETCH_ITEMS_FAILURE,\n      payload: 'error fetching items'\n    });\n  });\n}; //Add item actions\n\nexport const ADD_ITEM_START = 'ADD_ITEM_START';\nexport const ADD_ITEM_SUCCESS = 'ADD_ITEM_SUCCESS';\nexport const ADD_ITEM_FAILURE = 'ADD_ITEM_FAILURE';\nexport const addItem = item => dispatch => {\n  dispatch({\n    type: ADD_ITEM_START\n  });\n  const userid = localStorage.getItem('userid');\n  axiosWithAuth().post(\"https://alfonsog-kitchen.herokuapp.com/items/\".concat(userid, \"/items\"), item).then(response => {\n    console.log('adding item success: ', response);\n    dispatch({\n      type: ADD_ITEM_SUCCESS,\n      payload: response.data\n    });\n  }).catch(error => {\n    console.log('adding item error: ', error);\n    dispatch({\n      type: ADD_ITEM_FAILURE,\n      payload: 'error adding item'\n    });\n  });\n}; //Update item actions\n\nexport const UPDATE_ITEM_START = 'UPDATE_ITEM_START';\nexport const UPDATE_ITEM_SUCCESS = 'UPDATE_ITEM_SUCCESS';\nexport const UPDATE_ITEM_FAILURE = 'UPDATE_ITEM_FAILURE';\nexport const updateItem = item => dispatch => {\n  dispatch({\n    type: UPDATE_ITEM_START\n  });\n  axiosWithAuth().put(\"https://alfonsog-kitchen.herokuapp.com/items/\".concat(item.itemid), item).then(response => {\n    console.log('update item success: ', response);\n    const userid = localStorage.getItem('userid');\n    return axiosWithAuth().get(\"https://alfonsog-kitchen.herokuapp.com/items/\".concat(userid)).then(response => {\n      dispatch({\n        type: UPDATE_ITEM_SUCCESS,\n        payload: response.data\n      });\n    }).catch(error => {\n      console.log('fetching after updating error: ', error);\n      dispatch({\n        type: UPDATE_ITEM_FAILURE,\n        payload: 'error updating item'\n      });\n    });\n  }).catch(error => {\n    console.log('update item error: ', error);\n    dispatch({\n      type: UPDATE_ITEM_FAILURE,\n      payload: 'error updating item'\n    });\n  });\n}; //Delete item actions\n\nexport const DELETE_ITEM_START = 'DELETE_ITEM_START';\nexport const DELETE_ITEM_SUCCESS = 'DELETE_ITEM_SUCCESS';\nexport const DELETE_ITEM_FAILURE = 'DELETE_ITEM_FAILURE';\nexport const deleteItem = itemid => dispatch => {\n  dispatch({\n    type: DELETE_ITEM_START\n  });\n  axiosWithAuth().delete(\"https://alfonsog-kitchen.herokuapp.com/items/\".concat(itemid)).then(response => {\n    console.log('delete item success: ', response);\n    const userid = localStorage.getItem('userid');\n    return axiosWithAuth().get(\"https://alfonsog-kitchen.herokuapp.com/items/\".concat(userid)).then(response => {\n      dispatch({\n        type: DELETE_ITEM_SUCCESS,\n        payload: response.data\n      });\n    }).catch(error => {\n      console.log('fetching after deleting error: ', error);\n      dispatch({\n        type: DELETE_ITEM_FAILURE,\n        payload: 'error deleting item'\n      });\n    });\n  }).catch(error => {\n    console.log('delete item error: ', error);\n    dispatch({\n      type: DELETE_ITEM_FAILURE,\n      payload: 'error deleting item'\n    });\n  });\n}; //Set active item (for add or update item from)\n\nexport const SET_ACTIVE_ITEM = 'SET_ACTIVE_ITEM';\nexport const setActive = item => {\n  return {\n    type: SET_ACTIVE_ITEM,\n    payload: item\n  };\n}; //Filter items action\n\nexport const FILTER_BY_CATEGORY = 'FILTER_BY_CATEGORY';\nexport const setFilter = category => {\n  return {\n    type: FILTER_BY_CATEGORY,\n    payload: category\n  };\n};\nexport const SEARCH_BY_NAME = 'FILTER_BY_NAME';\nexport const searchByName = name => {\n  return {\n    type: SEARCH_BY_NAME,\n    payload: name\n  };\n};","map":{"version":3,"sources":["/Users/lauradaugherty/FrontEnd/Frontend/src/actions/index.js"],"names":["axios","axiosWithAuth","LOGIN_START","LOGIN_SUCCESS","LOGIN_FAILURE","login","credentials","dispatch","type","post","username","password","headers","then","response","console","log","payload","localStorage","setItem","data","access_token","catch","error","LOGOUT","logout","REGISTER_START","REGISTER_SUCCESS","REGISTER_FAILURE","register","history","push","FETCH_ITEMS_START","FETCH_ITEMS_SUCCESS","FETCH_ITEMS_FAILURE","fetchItems","get","userid","ADD_ITEM_START","ADD_ITEM_SUCCESS","ADD_ITEM_FAILURE","addItem","item","getItem","UPDATE_ITEM_START","UPDATE_ITEM_SUCCESS","UPDATE_ITEM_FAILURE","updateItem","put","itemid","DELETE_ITEM_START","DELETE_ITEM_SUCCESS","DELETE_ITEM_FAILURE","deleteItem","delete","SET_ACTIVE_ITEM","setActive","FILTER_BY_CATEGORY","setFilter","category","SEARCH_BY_NAME","searchByName","name"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport axiosWithAuth from '../utilities/axiosWithAuth';\n\n//Login actions\nexport const LOGIN_START = 'LOGIN_START';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\n\nexport const login = (credentials) => (dispatch) => {\n  dispatch({\n    type: LOGIN_START\n  })\n  return axios.post('https://alfonsog-kitchen.herokuapp.com/oauth/token', `grant_type=password&username=${credentials.username}&password=${credentials.password}`, {\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'Authorization': 'Basic bGFtYmRhLWNsaWVudDpsYW1iZGEtc2VjcmV0'\n    },\n  })\n    .then(response => {\n      console.log('login success: ', response)\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: credentials.username\n      })\n      localStorage.setItem('token', response.data.access_token)\n      localStorage.setItem('username', credentials.username)\n    })\n    .catch(error => {\n      console.log('login error: ', error);\n      dispatch({\n        type: LOGIN_FAILURE,\n        payload: 'error logging in'\n      })\n    })\n}\n\n//Logout action\nexport const LOGOUT = 'LOGOUT';\n\nexport const logout = () => {\n  return ({\n    type: LOGOUT\n  })\n}\n\n//Register actions\nexport const REGISTER_START = 'REGISTER_START';\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const REGISTER_FAILURE = 'REGISTER_FAILURE';\n\nexport const register = (history, credentials) => (dispatch) => {\n  dispatch({\n    type: REGISTER_START\n  })\n  axios.post('https://alfonsog-kitchen.herokuapp.com/createnewuser', credentials)\n    .then(response => {\n      console.log('registering success: ', response)\n      dispatch({\n        type: REGISTER_SUCCESS,\n      })\n      return axios.post('https://alfonsog-kitchen.herokuapp.com/oauth/token', `grant_type=password&username=${credentials.username}&password=${credentials.password}`, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Authorization': 'Basic bGFtYmRhLWNsaWVudDpsYW1iZGEtc2VjcmV0'\n        },\n      })\n        .then(response => {\n          console.log('login success: ', response)\n          dispatch({\n            type: LOGIN_SUCCESS,\n            payload: credentials.username\n          })\n          localStorage.setItem('token', response.data.access_token)\n          localStorage.setItem('username', credentials.username)\n          history.push('/itemList')\n        })\n        .catch(error => {\n          console.log('login error: ', error);\n          dispatch({\n            type: LOGIN_FAILURE,\n            payload: 'error logging in'\n          })\n        })\n    })\n    .catch(error => {\n      console.log('registering error: ', error);\n      dispatch({\n        type: REGISTER_FAILURE,\n        payload: 'error registering user'\n      })\n    })\n}\n\n//Fetch data actions\nexport const FETCH_ITEMS_START = 'FETCH_ITEMS_START';\nexport const FETCH_ITEMS_SUCCESS = 'FETCH_ITEMS_SUCCESS';\nexport const FETCH_ITEMS_FAILURE = 'FETCH_ITEMS_FAILURE';\n\nexport const fetchItems = (username) => (dispatch) => {\n  dispatch({\n    type: FETCH_ITEMS_START\n  })\n  axiosWithAuth().get(`https://alfonsog-kitchen.herokuapp.com/users/getuser/${username}`)\n    .then(response => {\n      console.log('fetching data success: ', response);\n      const userid = response.data.userid;\n      localStorage.setItem('userid', userid)\n      return axiosWithAuth().get(`https://alfonsog-kitchen.herokuapp.com/items/${userid}`)\n        .then(response => {\n          dispatch({\n            type: FETCH_ITEMS_SUCCESS,\n            payload: response.data\n          })\n        })\n        .catch(error => {\n          console.log('fetching data error inner: ', error);\n          dispatch({\n            type: FETCH_ITEMS_FAILURE,\n            payload: 'error fetching items'\n          })\n        })\n    })\n    .catch(error => {\n      console.log('fetching data error outer: ', error);\n      dispatch({\n        type: FETCH_ITEMS_FAILURE,\n        payload: 'error fetching items'\n      })\n    })\n}\n\n//Add item actions\nexport const ADD_ITEM_START = 'ADD_ITEM_START';\nexport const ADD_ITEM_SUCCESS = 'ADD_ITEM_SUCCESS';\nexport const ADD_ITEM_FAILURE = 'ADD_ITEM_FAILURE';\n\nexport const addItem = (item) => (dispatch) => {\n  dispatch({\n    type: ADD_ITEM_START\n  });\n  const userid = localStorage.getItem('userid');\n  axiosWithAuth().post(`https://alfonsog-kitchen.herokuapp.com/items/${userid}/items`, item)\n  .then(response => {\n    console.log('adding item success: ', response);\n    dispatch({\n      type: ADD_ITEM_SUCCESS,\n      payload: response.data\n    })\n  })\n  .catch(error => {\n    console.log('adding item error: ', error);\n    dispatch({\n      type: ADD_ITEM_FAILURE,\n      payload: 'error adding item'\n    })\n  })\n}\n\n//Update item actions\nexport const UPDATE_ITEM_START = 'UPDATE_ITEM_START';\nexport const UPDATE_ITEM_SUCCESS = 'UPDATE_ITEM_SUCCESS';\nexport const UPDATE_ITEM_FAILURE = 'UPDATE_ITEM_FAILURE';\n\nexport const updateItem = (item) => (dispatch) => {\n  dispatch({\n    type: UPDATE_ITEM_START\n  });\n  axiosWithAuth().put(`https://alfonsog-kitchen.herokuapp.com/items/${item.itemid}`, item)\n    .then(response => {\n      console.log('update item success: ', response);\n      const userid = localStorage.getItem('userid')\n      return axiosWithAuth().get(`https://alfonsog-kitchen.herokuapp.com/items/${userid}`)\n        .then(response => {\n          dispatch({\n            type: UPDATE_ITEM_SUCCESS,\n            payload: response.data\n          })\n        })\n        .catch(error => {\n          console.log('fetching after updating error: ', error);\n          dispatch({\n            type: UPDATE_ITEM_FAILURE,\n            payload: 'error updating item'\n          })\n        })\n    })\n    .catch(error => {\n      console.log('update item error: ', error);\n      dispatch({\n        type: UPDATE_ITEM_FAILURE,\n        payload: 'error updating item'\n      })\n    })\n \n}\n\n//Delete item actions\nexport const DELETE_ITEM_START = 'DELETE_ITEM_START';\nexport const DELETE_ITEM_SUCCESS = 'DELETE_ITEM_SUCCESS';\nexport const DELETE_ITEM_FAILURE = 'DELETE_ITEM_FAILURE';\n\nexport const deleteItem = (itemid) => (dispatch) => {\n  dispatch({\n    type: DELETE_ITEM_START\n  })\n  axiosWithAuth().delete(`https://alfonsog-kitchen.herokuapp.com/items/${itemid}`)\n    .then(response => {\n      console.log('delete item success: ', response);\n      const userid = localStorage.getItem('userid')\n      return axiosWithAuth().get(`https://alfonsog-kitchen.herokuapp.com/items/${userid}`)\n        .then(response => {\n          dispatch({\n            type: DELETE_ITEM_SUCCESS,\n            payload: response.data\n          })\n        })\n        .catch(error => {\n          console.log('fetching after deleting error: ', error);\n          dispatch({\n            type: DELETE_ITEM_FAILURE,\n            payload: 'error deleting item'\n          })\n        })\n    })\n    .catch(error => {\n      console.log('delete item error: ', error);\n      dispatch({\n        type: DELETE_ITEM_FAILURE,\n        payload: 'error deleting item'\n      })\n    })\n}\n\n//Set active item (for add or update item from)\nexport const SET_ACTIVE_ITEM = 'SET_ACTIVE_ITEM';\n\nexport const setActive = (item) => {\n  return ({\n    type: SET_ACTIVE_ITEM,\n    payload: item\n  })\n}\n\n//Filter items action\nexport const FILTER_BY_CATEGORY = 'FILTER_BY_CATEGORY';\n\nexport const setFilter = (category) => {\n  return ({\n    type: FILTER_BY_CATEGORY,\n    payload: category\n  })\n}\n\nexport const SEARCH_BY_NAME = 'FILTER_BY_NAME';\n\nexport const searchByName = (name) => {\n  return ({\n    type: SEARCH_BY_NAME,\n    payload: name\n  })\n}\n"]},"metadata":{},"sourceType":"module"}